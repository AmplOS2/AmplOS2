raspi {
        !TARGET=aarch64-none-elf make -j$(nproc)
}

full-clean (clean) {
        !rm -f fonts/*.h
}

clean {
        !rm -f amplos.elf kernel8.img kernel/*.o kernel/*/*.o
}

all (raspi) {}

format {
        !clang-format -Werror -i --style=file --verbose $(fd -i -E utf8 '\.(cc|c|hh|h)$' | grep -v font)
}

loc {
        !cloc .
}

test (all) {
        # Append -s and -S to be able to use gdb
        !qemu-system-aarch64 -M raspi3 -serial stdio -kernel kernel8.img
}
